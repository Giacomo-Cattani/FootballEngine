<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib/ballMovement.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib/ballMovement.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { setPositions } from '../lib/setPositions.js';
import { common } from '../lib/common.js';

/**
 * Moves the ball in the match based on the given match details.
 * @function
 * @param {Object} matchDetails - The details of the match including ball position, teams, and iterations.
 * @returns {Object} The updated match details after moving the ball.
 */
function moveBall(matchDetails) {
  if (matchDetails.ball.ballOverIterations === undefined || matchDetails.ball.ballOverIterations.length == 0) {
    matchDetails.ball.direction = `wait`
    return matchDetails
  }
  let { ball } = matchDetails
  let bPosition = ball.position
  let { kickOffTeam, secondTeam } = matchDetails
  let ballPos = ball.ballOverIterations[0]
  getBallDirection(matchDetails, ballPos)
  const power = ballPos[2]
  ballPos.splice()
  let bPlayer = setBPlayer(ballPos)
  let endPos = resolveBallMovement(bPlayer, bPosition, ballPos, power, kickOffTeam, secondTeam, matchDetails)
  if (matchDetails.endIteration == true) return matchDetails
  matchDetails.ball.ballOverIterations.shift()
  matchDetails.iterationLog.push(`ball still moving from previous kick: ${endPos}`)
  matchDetails.ball.position = endPos
  checkGoalScored(matchDetails)
  return matchDetails
}

/**
 * Creates a new player object representing the ball.
 * @function
 * @param {string} ballPos - The initial position of the ball.
 * @returns {Object} The player object representing the ball.
 */
function setBPlayer(ballPos) {
  return {
    'name': `Ball`,
    'position': `LB`,
    'rating': `100`,
    'skill': {
      'passing': `100`,
      'shooting': `100`,
      'saving': `100`,
      'tackling': `100`,
      'agility': `100`,
      'strength': `100`,
      'penalty_taking': `100`,
      'jumping': `100`
    },
    'originPOS': ballPos,
    'currentPOS': ballPos,
    'injured': false
  }
}

/**
 * Simulates the movement of the ball after it has been kicked by a player.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Object} team - The team that the player belongs to.
 * @param {Object} player - The player who kicked the ball.
 * @returns {Object} The calculated ball movement over time.
 */
function ballKicked(matchDetails, team, player) {
  let { position, direction } = matchDetails.ball
  const [, pitchHeight] = matchDetails.pitchSize
  matchDetails.iterationLog.push(`ball kicked by: ${player.name}`)
  matchDetails.ball.lastTouch.playerName = player.name
  matchDetails.ball.lastTouch.playerID = player.playerID
  matchDetails.ball.lastTouch.teamID = team.teamID
  let newPos = [0, 0]
  let teamShootingToTop = [`wait`, `north`, `north`, `north`, `north`, `east`, `east`, `west`, `west`]
  let teamShootingToTop2 = [`northeast`, `northeast`, `northeast`, `northwest`, `northwest`, `northwest`]
  let topTeamDirection = teamShootingToTop.concat(teamShootingToTop2)
  let teamShootingToBottom = [`wait`, `south`, `south`, `south`, `south`, `east`, `east`, `west`, `west`]
  let teamShootingToBottom2 = [`southeast`, `southeast`, `southeast`, `southwest`, `southwest`, `southwest`]
  let bottomTeamDirection = teamShootingToBottom.concat(teamShootingToBottom2)
  let power = common.calculatePower(player.skill.strength)
  if (player.originPOS[1] > (pitchHeight / 2)) {
    direction = topTeamDirection[common.getRandomNumber(0, topTeamDirection.length - 1)]
    newPos = getTopKickedPosition(direction, position, power)
  } else {
    direction = bottomTeamDirection[common.getRandomNumber(0, bottomTeamDirection.length - 1)]
    newPos = getBottomKickedPosition(direction, position, power)
  }
  return calcBallMovementOverTime(matchDetails, player.skill.strength, newPos, player)
}

/**
 * Calculates the new position of the ball after being kicked in a specific direction.
 * @function
 * @param {string} direction - The direction in which the ball is kicked. Possible values are: 'wait', 'north', 'east', 'west', 'northeast', 'northwest'.
 * @param {number} position - The current position of the ball.
 * @param {number} power - The power of the kick.
 * @returns {Object} An object representing the new position of the ball with properties: 'x1', 'x2', 'y1', 'y2'.
 */
function getTopKickedPosition(direction, position, power) {
  if (direction === `wait`) return newKickedPosition(position, 0, (power / 2), 0, (power / 2))
  else if (direction === `north`) return newKickedPosition(position, -20, 20, -power, -(power / 2))
  else if (direction === `east`) return newKickedPosition(position, (power / 2), power, -20, 20)
  else if (direction === `west`) return newKickedPosition(position, -power, -(power / 2), -20, 20)
  else if (direction === `northeast`) return newKickedPosition(position, 0, (power / 2), -power, -(power / 2))
  else if (direction === `northwest`) return newKickedPosition(position, -(power / 2), 0, -power, -(power / 2))
}

/**
 * Calculates the new position of the ball after it is kicked from the bottom.
 * @function
 * @param {string} direction - The direction in which the ball is kicked. Possible values are: 'wait', 'south', 'east', 'west', 'southeast', 'southwest'.
 * @param {number} position - The current position of the ball.
 * @param {number} power - The power of the kick.
 * @returns {object} The new position of the ball as an object with properties: x1, x2, y1, y2.
 */
function getBottomKickedPosition(direction, position, power) {
  if (direction === `wait`) return newKickedPosition(position, 0, (power / 2), 0, (power / 2))
  else if (direction === `south`) return newKickedPosition(position, -20, 20, (power / 2), power)
  else if (direction === `east`) return newKickedPosition(position, (power / 2), power, -20, 20)
  else if (direction === `west`) return newKickedPosition(position, -power, -(power / 2), -20, 20)
  else if (direction === `southeast`) return newKickedPosition(position, 0, (power / 2), (power / 2), power)
  else if (direction === `southwest`) return newKickedPosition(position, -(power / 2), 0, (power / 2), power)
}

/**
 * Calculates a new position based on the given position and range values.
 * @function
 * @param {number[]} pos - The current position as an array of two numbers [x, y].
 * @param {number} lowX - The lower bound of the random X value to be added to the current position.
 * @param {number} highX - The upper bound of the random X value to be added to the current position.
 * @param {number} lowY - The lower bound of the random Y value to be added to the current position.
 * @param {number} highY - The upper bound of the random Y value to be added to the current position.
 * @returns {number[]} The new position as an array of two numbers [x, y].
 */
function newKickedPosition(pos, lowX, highX, lowY, highY) {
  let newPosition = [0, 0]
  newPosition[0] = pos[0] + common.getRandomNumber(lowX, highX)
  newPosition[1] = pos[1] + common.getRandomNumber(lowY, highY)
  return newPosition
}

/**
 * Makes a shot in the football match.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Object} team - The team making the shot.
 * @param {Object} player - The player making the shot.
 * @returns {Array} The end position of the shot.
 */
function shotMade(matchDetails, team, player) {
  const [pitchWidth, pitchHeight] = matchDetails.pitchSize
  matchDetails.iterationLog.push(`Shot Made by: ${player.name}`)
  matchDetails.ball.lastTouch.playerName = player.name
  matchDetails.ball.lastTouch.playerID = player.playerID
  matchDetails.ball.lastTouch.teamID = team.teamID
  let shotPosition = [0, 0]
  let shotPower = common.calculatePower(player.skill.strength)
  let PlyPos = player.currentPOS
  let thisTeamStats
  if (common.isEven(matchDetails.half)) thisTeamStats = matchDetails.kickOffTeamStatistics
  else if (common.isOdd(matchDetails.half)) thisTeamStats = matchDetails.secondTeamStatistics
  else throw new Error(`You cannot supply 0 as a half`)
  thisTeamStats.shots.total++
  player.stats.shots.total++
  let shotReachGoal
  if (player.originPOS[1] > pitchHeight / 2) {
    shotReachGoal = !(((PlyPos[1] - shotPower) > 0))
  } else {
    shotReachGoal = !(((PlyPos[1] + shotPower) &lt; pitchHeight))
  }
  if (shotReachGoal &amp;&amp; player.skill.shooting > common.getRandomNumber(0, 40)) {
    thisTeamStats.shots.on++
    player.stats.shots.on++
    shotPosition[0] = common.getRandomNumber((pitchWidth / 2) - 50, (pitchWidth / 2) + 50)
    matchDetails.iterationLog.push(`Shot On Target at X Position ${shotPosition[0]}`)
    if (player.originPOS[1] > pitchHeight / 2) shotPosition[1] = -1
    else shotPosition[1] = pitchHeight + 1
  } else {
    thisTeamStats.shots.off++
    player.stats.shots.off++
    let left = (common.getRandomNumber(0, 10) > 5)
    let leftPos = common.getRandomNumber(0, (pitchWidth / 2) - 55)
    let righttPos = common.getRandomNumber((pitchWidth / 2) + 55, pitchWidth)
    shotPosition[0] = (left) ? leftPos : righttPos
    matchDetails.iterationLog.push(`Shot Off Target at X Position ${shotPosition[0]}`)
    if (player.originPOS[1] > pitchHeight / 2) shotPosition[1] = PlyPos[1] - shotPower
    else shotPosition[1] = PlyPos[1] + shotPower
  }
  let endPos = calcBallMovementOverTime(matchDetails, player.skill.strength, shotPosition, player)
  checkGoalScored(matchDetails)
  return endPos
}

/**
 * Takes a penalty in a football match.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Object} team - The team taking the penalty.
 * @param {Object} player - The player taking the penalty.
 * @returns {Array} The end position of the ball after the penalty is taken.
 */
function penaltyTaken(matchDetails, team, player) {
  const [pitchWidth, pitchHeight] = matchDetails.pitchSize
  player.action = `none`
  matchDetails.iterationLog.push(`Penalty Taken by: ${player.name}`)
  matchDetails.ball.lastTouch.playerName = player.name
  matchDetails.ball.lastTouch.playerID = player.playerID
  matchDetails.ball.lastTouch.teamID = team.teamID
  let shotPosition = [0, 0]
  let shotPower = common.calculatePower(player.skill.strength)
  let PlyPos = player.currentPOS
  let thisTeamStats
  if (common.isEven(matchDetails.half)) thisTeamStats = matchDetails.kickOffTeamStatistics
  else if (common.isOdd(matchDetails.half)) thisTeamStats = matchDetails.secondTeamStatistics
  else throw new Error(`You cannot supply 0 as a half`)
  thisTeamStats.shots.total++
  player.stats.shots.total++
  if (player.skill.penalty_taking > common.getRandomNumber(0, 100)) {
    thisTeamStats.shots.on++
    player.stats.shots.on++
    shotPosition[0] = common.getRandomNumber((pitchWidth / 2) - 50, (pitchWidth / 2) + 50)
    matchDetails.iterationLog.push(`Shot On Target at X Position ${shotPosition[0]}`)
  } else {
    thisTeamStats.shots.off++
    player.stats.shots.off++
    let left = (common.getRandomNumber(0, 10) > 5)
    let leftPos = common.getRandomNumber(0, (pitchWidth / 2) - 55)
    let righttPos = common.getRandomNumber((pitchWidth / 2) + 55, pitchWidth)
    shotPosition[0] = (left) ? leftPos : righttPos
    matchDetails.iterationLog.push(`Shot Off Target at X Position ${shotPosition[0]}`)
  }
  if (player.originPOS[1] > pitchHeight / 2) shotPosition[1] = PlyPos[1] - shotPower
  else shotPosition[1] = PlyPos[1] + shotPower
  let endPos = calcBallMovementOverTime(matchDetails, player.skill.strength, shotPosition, player)
  checkGoalScored(matchDetails)
  return endPos
}

/**
 * Checks if a goal is scored based on the given match details.
 * @function
 * @param {Object} matchDetails - The details of the match.
 */
function checkGoalScored(matchDetails) {
  let {
    ball, half, kickOffTeam, secondTeam
  } = matchDetails
  const [pitchWidth, pitchHeight, goalWidth] = matchDetails.pitchSize
  const centreGoal = pitchWidth / 2
  const goalEdge = goalWidth / 2
  const goalX = common.isBetween(ball.position[0], centreGoal - goalEdge, centreGoal + goalEdge)
  let KOGoalie = kickOffTeam.players[0]
  let STGoalie = secondTeam.players[0]
  let ballProx = 8
  let [ballX, ballY] = ball.position
  let nearKOGoalieX = common.isBetween(ballX, KOGoalie.currentPOS[0] - ballProx, KOGoalie.currentPOS[0] + ballProx)
  let nearKOGoalieY = common.isBetween(ballY, KOGoalie.currentPOS[1] - ballProx, KOGoalie.currentPOS[1] + ballProx)
  let nearSTGoalieX = common.isBetween(ballX, STGoalie.currentPOS[0] - ballProx, STGoalie.currentPOS[0] + ballProx)
  let nearSTGoalieY = common.isBetween(ballY, STGoalie.currentPOS[1] - ballProx, STGoalie.currentPOS[1] + ballProx)
  if (nearKOGoalieX &amp;&amp; nearKOGoalieY &amp;&amp; KOGoalie.skill.saving > common.getRandomNumber(0, 100)) {
    matchDetails = setPositions.setGoalieHasBall(matchDetails, KOGoalie)
    if (common.inTopPenalty(matchDetails, ball.position) || common.inBottomPenalty(matchDetails, ball.position)) {
      matchDetails.iterationLog.push(`ball saved by ${KOGoalie.name} possesion to ${kickOffTeam.name}`)
      KOGoalie.stats.saves++
    }
  } else if (nearSTGoalieX &amp;&amp; nearSTGoalieY &amp;&amp; STGoalie.skill.saving > common.getRandomNumber(0, 100)) {
    matchDetails = setPositions.setGoalieHasBall(matchDetails, STGoalie)
    if (common.inTopPenalty(matchDetails, ball.position) || common.inBottomPenalty(matchDetails, ball.position)) {
      matchDetails.iterationLog.push(`ball saved by ${STGoalie.name} possesion to ${secondTeam.name}`)
      STGoalie.stats.saves++
    }
  } else if (goalX) {
    if (ball.position[1] &lt; 1) {
      if (half == 0) throw new Error('cannot set half as 0')
      else if (common.isOdd(half)) matchDetails = setPositions.setSecondTeamGoalScored(matchDetails)
      else matchDetails = setPositions.setKickOffTeamGoalScored(matchDetails)
    } else if (ball.position[1] >= pitchHeight) {
      if (half == 0) throw new Error('cannot set half as 0')
      else if (common.isOdd(half)) matchDetails = setPositions.setKickOffTeamGoalScored(matchDetails)
      else matchDetails = setPositions.setSecondTeamGoalScored(matchDetails)
    }
  }
}

/**
 * Calculates the movement of the ball when a through ball is passed by a player.
 * @function
 * @param {object} matchDetails - The details of the match.
 * @param {object} team - The team object.
 * @param {object} player - The player object.
 * @returns {object} The calculated ball movement over time.
 */
function throughBall(matchDetails, team, player) {
  matchDetails.ball.lastTouch.playerName = player.name
  matchDetails.ball.lastTouch.playerID = player.playerID
  matchDetails.ball.lastTouch.teamID = team.teamID
  const [, pitchHeight] = matchDetails.pitchSize
  let { position } = matchDetails.ball
  let closePlyPos = [0, 0]
  let playersInDistance = getPlayersInDistance(team, player, matchDetails.pitchSize)
  let tPlyr = playersInDistance[common.getRandomNumber(0, (playersInDistance.length - 1))]
  matchDetails.iterationLog.push(`through ball passed by: ${player.name} to: ${tPlyr.name}`)
  player.stats.passes.total++
  let bottomThird = (position[1] > (pitchHeight - (pitchHeight / 3)))
  let middleThird = !!((position[1] > (pitchHeight / 3) &amp;&amp; position[1] &lt; (pitchHeight - (pitchHeight / 3))))
  if (player.skill.passing > common.getRandomNumber(0, 100)) {
    if (player.originPOS[1] > pitchHeight / 2) closePlyPos = setTargetPlyPos(tPlyr.position, 0, 0, -20, -10)
    else closePlyPos = setTargetPlyPos(tPlyr.position, 0, 0, 10, 30)
  } else if (player.originPOS[1] > (pitchHeight / 2)) {
    if (bottomThird) closePlyPos = setTargetPlyPos(tPlyr.position, -10, 10, -10, 10)
    else if (middleThird) closePlyPos = setTargetPlyPos(tPlyr.position, -20, 20, -50, 50)
    else closePlyPos = setTargetPlyPos(tPlyr.position, -30, 30, -100, 100)
  } else if (bottomThird) closePlyPos = setTargetPlyPos(tPlyr.position, -30, 30, -100, 100)
  else if (middleThird) closePlyPos = setTargetPlyPos(tPlyr.position, -20, 20, -50, 50)
  else closePlyPos = setTargetPlyPos(tPlyr.position, -10, 10, -10, 10)
  return calcBallMovementOverTime(matchDetails, player.skill.strength, closePlyPos, player)
}

/**
 * Retrieves the players from a team that are within a certain distance from a given player.
 * @function
 * @param {Object} team - The team object containing the players.
 * @param {Object} player - The player object to compare distances with.
 * @param {Array} pitchSize - The size of the pitch represented as an array [pitchWidth, pitchHeight].
 * @returns {Array} An array of players within the specified distance, sorted by proximity to the given player.
 */
function getPlayersInDistance(team, player, pitchSize) {
  const [pitchWidth, pitchHeight] = pitchSize
  let playersInDistance = []
  for (const teamPlayer of team.players) {
    if (teamPlayer.name != player.name) {
      let onPitchX = common.isBetween(teamPlayer.currentPOS[0], -1, pitchWidth + 1)
      let onPitchY = common.isBetween(teamPlayer.currentPOS[1], -1, pitchHeight + 1)
      if (onPitchX &amp;&amp; onPitchY) {
        let playerToPlayerX = player.currentPOS[0] - teamPlayer.currentPOS[0]
        let playerToPlayerY = player.currentPOS[1] - teamPlayer.currentPOS[1]
        let proximityToBall = Math.abs(playerToPlayerX + playerToPlayerY)
        playersInDistance.push({
          'position': teamPlayer.currentPOS,
          'proximity': proximityToBall,
          'name': teamPlayer.name
        })
      }
    }
  }
  playersInDistance.sort(function (a, b) {
    return a.proximity - b.proximity
  })
  return playersInDistance
}

/**
 * Resolves the movement of the ball based on the given parameters.
 * @function
 * @param {Object} player - The player object.
 * @param {Array} thisPOS - The current position of the ball.
 * @param {Array} newPOS - The new position of the ball.
 * @param {number} power - The power of the ball movement.
 * @param {Array} team - The team array.
 * @param {Array} opp - The opponent team array.
 * @param {Object} matchDetails - The match details object.
 * @returns {Array} The last position of the ball after resolving the movement.
 */
function resolveBallMovement(player, thisPOS, newPOS, power, team, opp, matchDetails) {
  common.removeBallFromAllPlayers(matchDetails)
  let lineToEndPosition = common.getBallTrajectory(thisPOS, newPOS, power)
  for (const thisPos of lineToEndPosition) {
    let checkPos = [common.round(thisPos[0], 0), common.round(thisPos[1], 0), thisPos[2]]
    let playerInfo1 = setPositions.closestPlayerToPosition(player, team, checkPos)
    let playerInfo2 = setPositions.closestPlayerToPosition(player, opp, checkPos)
    let thisPlayerProx = Math.max(playerInfo1.proxToBall, playerInfo2.proxToBall)
    let thisPlayer = (thisPlayerProx == playerInfo1.proxToBall) ? playerInfo1.thePlayer : playerInfo2.thePlayer
    let thisTeam = (thisPlayerProx == playerInfo1.proxToBall) ? team : opp
    if (thisPlayer) thisPlayerIsInProximity(matchDetails, thisPlayer, thisPOS, thisPos, power, thisTeam)
  }
  let lastTeam = matchDetails.ball.lastTouch.teamID
  matchDetails = setPositions.keepInBoundaries(matchDetails, lastTeam, newPOS)
  if (matchDetails.endIteration == true) return
  let lastPOS = matchDetails.ballIntended || matchDetails.ball.position
  delete matchDetails.ballIntended
  return [common.round(lastPOS[0], 2), common.round(lastPOS[1], 2)]
}

/**
 * Checks if a player is in proximity to the ball and performs actions accordingly.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Object} thisPlayer - The player object.
 * @param {Array} thisPOS - The current position of the player.
 * @param {Array} thisPos - The position of the ball.
 * @param {number} power - The power of the ball.
 * @param {string} thisTeam - The team of the player.
 * @returns {Array|undefined} The new position of the ball or undefined.
 */
function thisPlayerIsInProximity(matchDetails, thisPlayer, thisPOS, thisPos, power, thisTeam) {
  let checkPos = [common.round(thisPos[0], 0), common.round(thisPos[1], 0), thisPos[2]]
  let isGoalie = (thisPlayer.position === 'GK')
  const xPosProx = common.isBetween(thisPlayer.currentPOS[0], thisPos[0] - 3, thisPos[0] + 3)
  const yPosProx = common.isBetween(thisPlayer.currentPOS[1], thisPos[1] - 3, thisPos[1] + 3)
  const goaliexPosProx = common.isBetween(thisPlayer.currentPOS[0], thisPos[0] - 11, thisPos[0] + 11)
  const goalieyPosProx = common.isBetween(thisPlayer.currentPOS[1], thisPos[1] - 2, thisPos[1] + 2)
  if (isGoalie &amp;&amp; goaliexPosProx &amp;&amp; goalieyPosProx) {
    if (common.isBetween(checkPos[2], -1, thisPlayer.skill.jumping + 1)) {
      let saving = thisPlayer.skill.saving || ''
      if (saving &amp;&amp; saving > common.getRandomNumber(0, power)) {
        setBallMovementMatchDetails(matchDetails, thisPlayer, thisPos, thisTeam)
        matchDetails.iterationLog.push(`Ball saved`)
        thisPlayer.stats.saves++
        return thisPos
      }
    }
  } else if (xPosProx &amp;&amp; yPosProx) {
    if (common.isBetween(checkPos[2], -1, thisPlayer.skill.jumping + 1)) {
      let deflectPos = thisPlayer.currentPOS
      let newPOS = resolveDeflection(power, thisPOS, deflectPos, thisPlayer, thisTeam.name, matchDetails)
      matchDetails.iterationLog.push(`Ball deflected`)
      return [common.round(newPOS[0], 2), common.round(newPOS[1], 2)]
    }
  }
}

/**
 * Sets the ball movement details for a match.
 * @function
 * @param {object} matchDetails - The match details object.
 * @param {object} thisPlayer - The player object.
 * @param {array} thisPos - The position array.
 * @param {object} thisTeam - The team object.
 */
function setBallMovementMatchDetails(matchDetails, thisPlayer, thisPos, thisTeam) {
  matchDetails.ball.ballOverIterations = []
  matchDetails.ball.Player = thisPlayer.playerID
  matchDetails.ball.withPlayer = true
  matchDetails.ball.lastTouch.playerName = thisPlayer.name
  matchDetails.ball.lastTouch.playerID = thisPlayer.playerID
  matchDetails.ball.lastTouch.teamID = thisTeam.teamID
  matchDetails.ball.withTeam = thisTeam.teamID
  let tempArray = thisPos
  matchDetails.ball.position = tempArray.map(x => x)
  thisPlayer.currentPOS = tempArray.map(x => x)
}

/**
 * Resolves the deflection of the ball based on the given parameters.
 * @function
 * @param {number} power - The power of the ball.
 * @param {Array&lt;number>} thisPOS - The current position of the ball.
 * @param {Array&lt;number>} defPosition - The position of the defending player.
 * @param {string} defPlayer - The defending player's name.
 * @param {string} defTeam - The defending team's name.
 * @param {Object} matchDetails - The details of the match.
 * @returns {Array&lt;number>} The new position of the ball after deflection.
 */
function resolveDeflection(power, thisPOS, defPosition, defPlayer, defTeam, matchDetails) {
  let xMovement = (thisPOS[0] - defPosition[0]) ** 2
  let yMovement = (thisPOS[1] - defPosition[1]) ** 2
  let movementDistance = Math.sqrt(xMovement + yMovement)
  let newPower = power - movementDistance
  let tempPosition = ['', '']
  let { direction } = matchDetails.ball
  if (newPower &lt; 75) {
    setDeflectionPlayerHasBall(matchDetails, defPlayer, defTeam)
    return defPosition
  }
  defPlayer.hasBall = false
  matchDetails.ball.Player = ''
  matchDetails.ball.withPlayer = false
  matchDetails.ball.withTeam = ''
  tempPosition = setDeflectionDirectionPos(direction, defPosition, newPower)
  let lastTeam = matchDetails.ball.lastTouch.teamID
  matchDetails = setPositions.keepInBoundaries(matchDetails, lastTeam.name, tempPosition)
  let intended = matchDetails.ballIntended
  let lastPOS = (intended) ? intended.map(x => x) : matchDetails.ball.position.map(x => x)
  delete matchDetails.ballIntended
  return lastPOS
}

/**
 * Calculates the new position of the ball based on the given direction, deflection position, and power.
 * @function
 * @param {string} direction - The direction of the deflection. Possible values are 'east', 'west', 'north', 'south', 'northeast', 'northwest', 'southeast', 'southwest', or 'wait'.
 * @param {number[]} defPosition - The current position of the ball before deflection as an array of two numbers [x, y].
 * @param {number} newPower - The power of the deflection.
 * @returns {number[]} The new position of the ball after deflection as an array of two numbers [x, y].
 */
function setDeflectionDirectionPos(direction, defPosition, newPower) {
  let tempPosition = [0, 0]
  if (direction === `east` || direction === `northeast` || direction === `southeast`) {
    if (direction === `east`) tempPosition[1] = common.getRandomNumber(defPosition[1] - 3, defPosition[1] + 3)
    tempPosition[0] = defPosition[0] - (newPower / 2)
  } else if (direction === `west` || direction === `northwest` || direction === `southwest`) {
    if (direction === `west`) tempPosition[1] = common.getRandomNumber(defPosition[1] - 3, defPosition[1] + 3)
    tempPosition[0] = defPosition[0] + (newPower / 2)
  }
  if (direction === `north` || direction === `northeast` || direction === `northwest`) {
    if (direction === `north`) tempPosition[0] = common.getRandomNumber(defPosition[0] - 3, defPosition[0] + 3)
    tempPosition[1] = defPosition[1] + (newPower / 2)
  } else if (direction === `south` || direction === `southeast` || direction === `southwest`) {
    if (direction === `south`) tempPosition[0] = common.getRandomNumber(defPosition[0] - 3, defPosition[0] + 3)
    tempPosition[1] = defPosition[1] - (newPower / 2)
  }
  if (direction === `wait`) {
    tempPosition[0] = common.getRandomNumber(-newPower / 2, newPower / 2)
    tempPosition[1] = common.getRandomNumber(-newPower / 2, newPower / 2)
  }
  return tempPosition
}

/**
 * Sets the deflection when a player has the ball.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Object} defPlayer - The defending player.
 * @param {Object} defTeam - The defending team.
 * @returns {Array} The updated position of the ball.
 */
function setDeflectionPlayerHasBall(matchDetails, defPlayer, defTeam) {
  defPlayer.hasBall = true
  matchDetails.ball.lastTouch.playerName = defPlayer.name
  matchDetails.ball.lastTouch.playerID = defPlayer.playerID
  matchDetails.ball.lastTouch.teamID = defTeam.teamID
  if (defPlayer.offside == true) {
    setDeflectionPlayerOffside(matchDetails, defTeam, defPlayer)
    return matchDetails.ball.position
  }
  matchDetails.ball.ballOverIterations = []
  matchDetails.ball.Player = defPlayer.playerID
  matchDetails.ball.withPlayer = true
  matchDetails.ball.withTeam = defTeam.teamID
  let tempArray = defPlayer.currentPOS
  matchDetails.ball.position = tempArray.map(x => x)
}

/**
 * Sets the deflection player as offside and updates the match details accordingly.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Object} defTeam - The defending team.
 * @param {Object} defPlayer - The defending player.
 * @returns {Object} The updated match details.
 */
function setDeflectionPlayerOffside(matchDetails, defTeam, defPlayer) {
  defPlayer.offside = false
  defPlayer.hasBall = false
  matchDetails.ball.Player = ''
  matchDetails.ball.withPlayer = false
  matchDetails.ball.withTeam = ''
  matchDetails.iterationLog.push(`${defPlayer.name} is offside. Set piece given`)
  if (defTeam.name == matchDetails.kickOffTeam.name) matchDetails = setPositions.setSetpieceSecondTeam(matchDetails)
  else matchDetails = setPositions.setSetpieceKickOffTeam(matchDetails)
}

/**
 * Calculates the direction of the ball movement based on the current position and the next position.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Array} nextPOS - The next position of the ball.
 */
function getBallDirection(matchDetails, nextPOS) {
  let thisPOS = matchDetails.ball.position
  let movementX = thisPOS[0] - nextPOS[0]
  let movementY = thisPOS[1] - nextPOS[1]
  if (movementX === 0) {
    if (movementY === 0) matchDetails.ball.direction = `wait`
    else if (movementY &lt; 0) matchDetails.ball.direction = `south`
    else if (movementY > 0) matchDetails.ball.direction = `north`
  } else if (movementY === 0) {
    if (movementX &lt; 0) matchDetails.ball.direction = `east`
    else if (movementX > 0) matchDetails.ball.direction = `west`
  } else if (movementX &lt; 0 &amp;&amp; movementY &lt; 0) matchDetails.ball.direction = `southeast`
  else if (movementX > 0 &amp;&amp; movementY > 0) matchDetails.ball.direction = `northwest`
  else if (movementX > 0 &amp;&amp; movementY &lt; 0) matchDetails.ball.direction = `southwest`
  else if (movementX &lt; 0 &amp;&amp; movementY > 0) matchDetails.ball.direction = `northeast`
}

/**
 * Updates the match details after the ball has been passed by a player.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {Object} team - The team object to which the player belongs.
 * @param {Object} player - The player object who passed the ball.
 * @returns {Object} The calculated ball movement over time.
 */
function ballPassed(matchDetails, team, player) {
  matchDetails.ball.lastTouch.playerName = player.name
  matchDetails.ball.lastTouch.playerID = player.playerID
  matchDetails.ball.lastTouch.teamID = team.teamID
  const [, pitchHeight] = matchDetails.pitchSize
  const side = (player.originPOS[1] > (pitchHeight / 2)) ? 'bottom' : 'top'
  let { position } = matchDetails.ball
  let closePlyPos = [0, 0]
  let playersInDistance = getPlayersInDistance(team, player, matchDetails.pitchSize)
  let tPlyr = getTargetPlayer(playersInDistance, side, pitchHeight)
  let bottomThird = (position[1] > (pitchHeight - (pitchHeight / 3)))
  let middleThird = !!((position[1] > (pitchHeight / 3) &amp;&amp; position[1] &lt; (pitchHeight - (pitchHeight / 3))))
  if (player.skill.passing > common.getRandomNumber(0, 100)) closePlyPos = tPlyr.position
  else if (player.originPOS[1] > (pitchHeight / 2)) {
    if (bottomThird) closePlyPos = setTargetPlyPos(tPlyr.position, -10, 10, -10, 10)
    else if (middleThird) closePlyPos = setTargetPlyPos(tPlyr.position, -50, 50, -50, 50)
    else closePlyPos = setTargetPlyPos(tPlyr.position, -100, 100, -100, 100)
  } else if (bottomThird) closePlyPos = setTargetPlyPos(tPlyr.position, -100, 100, -100, 100)
  else if (middleThird) closePlyPos = setTargetPlyPos(tPlyr.position, -50, 50, -50, 50)
  else closePlyPos = setTargetPlyPos(tPlyr.position, -10, 10, -10, 10)
  matchDetails.iterationLog.push(`ball passed by: ${player.name} to: ${tPlyr.name}`)
  player.stats.passes.total++
  return calcBallMovementOverTime(matchDetails, player.skill.strength, closePlyPos, player)
}

/**
 * Sets the target player position based on the given range of values.
 * @function
 * @param {Array&lt;number>} tplyr - The target player position as an array of two numbers [x, y].
 * @param {number} lowX - The lower bound of the random X value.
 * @param {number} highX - The upper bound of the random X value.
 * @param {number} lowY - The lower bound of the random Y value.
 * @param {number} highY - The upper bound of the random Y value.
 * @returns {Array&lt;number>} The updated close player position as an array of two numbers [x, y].
 */
function setTargetPlyPos(tplyr, lowX, highX, lowY, highY) {
  let closePlyPos = [0, 0]
  let [targetPlayerXPos, targetPlayerYPos] = tplyr
  closePlyPos[0] = common.round(targetPlayerXPos + common.getRandomNumber(lowX, highX), 0)
  closePlyPos[1] = common.round(targetPlayerYPos + common.getRandomNumber(lowY, highY), 0)
  return closePlyPos
}

/**
 * Returns a target player based on the given criteria.
 * @function
 * @param {Array} playersArray - An array of player objects.
 * @param {string} side - The side of the pitch ('top' or 'bottom').
 * @param {number} pitchHeight - The height of the pitch.
 * @returns {Object} The target player object.
 */
function getTargetPlayer(playersArray, side, pitchHeight) {
  let tempArray = []
  for (let tempPlayer of playersArray) {
    if (tempPlayer.proximity &lt; (pitchHeight / 2)) tempArray.push(tempPlayer)
  }
  if (tempArray.length === 0) tempArray = playersArray
  let thisRand = common.getRandomNumber(0, (tempArray.length - 1))
  let thisPlayer = tempArray[thisRand]
  if (thisRand > 5) thisRand = common.getRandomNumber(0, (tempArray.length - 1))
  if (side == 'top' &amp;&amp; tempArray[thisRand].proximity > thisPlayer.proximity) {
    thisPlayer = tempArray[thisRand]
  } else if (side == 'bottom' &amp;&amp; tempArray[thisRand].proximity &lt; thisPlayer.proximity) {
    thisPlayer = tempArray[thisRand]
  }
  if (thisRand > 5) thisRand = common.getRandomNumber(0, (tempArray.length - 1))
  if (side == 'top' &amp;&amp; tempArray[thisRand].proximity > thisPlayer.proximity) {
    thisPlayer = tempArray[thisRand]
  } else if (side == 'bottom' &amp;&amp; tempArray[thisRand].proximity &lt; thisPlayer.proximity) {
    thisPlayer = tempArray[thisRand]
  }
  return thisPlayer
}

/**
 * Updates the match details when the ball is crossed by a player.
 * @function
 * @param {object} matchDetails - The details of the match.
 * @param {object} team - The team object to which the player belongs.
 * @param {object} player - The player object who crossed the ball.
 * @returns {object} The updated match details after calculating the ball movement over time.
 */
function ballCrossed(matchDetails, team, player) {
  matchDetails.ball.lastTouch.playerName = player.name
  matchDetails.ball.lastTouch.playerID = player.playerID
  matchDetails.ball.lastTouch.teamID = team.teamID
  const [pitchWidth, pitchHeight] = matchDetails.pitchSize
  let ballIntended = []
  if (player.originPOS[1] > (pitchHeight / 2)) {
    ballIntended[1] = common.getRandomNumber(0, (pitchHeight / 5))
    if (player.currentPOS[0] &lt; (pitchWidth / 2)) ballIntended[0] = common.getRandomNumber((pitchWidth / 3), pitchWidth)
    else ballIntended[0] = common.getRandomNumber(0, pitchWidth - (pitchWidth / 3))
  } else {
    ballIntended[1] = common.getRandomNumber(pitchHeight - (pitchHeight / 5), pitchHeight)
    if (player.currentPOS[0] &lt; (pitchWidth / 2)) ballIntended[0] = common.getRandomNumber((pitchWidth / 3), pitchWidth)
    else ballIntended[0] = common.getRandomNumber(0, pitchWidth - (pitchWidth / 3))
  }
  matchDetails.iterationLog.push(`ball crossed by: ${player.name}`)
  player.stats.passes.total++
  return calcBallMovementOverTime(matchDetails, player.skill.strength, ballIntended, player)
}

/**
 * Calculates the movement of the ball over time based on the given match details, strength, next position, and player.
 * @function
 * @param {Object} matchDetails - The details of the match.
 * @param {number} strength - The strength of the ball movement.
 * @param {Array&lt;number>} nextPosition - The next position of the ball.
 * @param {string} player - The player who is moving the ball.
 * @returns {Array&lt;number>} The end position of the ball.
 */
function calcBallMovementOverTime(matchDetails, strength, nextPosition, player) {
  let { kickOffTeam, secondTeam } = matchDetails
  let { position } = matchDetails.ball
  const power = common.calculatePower(strength)
  const changeInX = (nextPosition[0] - position[0])
  const changeInY = (nextPosition[1] - position[1])
  let totalChange = Math.max(Math.abs(changeInX), Math.abs(changeInY))
  let movementIterations = common.round((totalChange / common.getRandomNumber(2, 3)), 0)
  if (movementIterations &lt; 1) movementIterations = 1
  let powerArray = splitNumberIntoN(power, movementIterations)
  let xArray = splitNumberIntoN(changeInX, movementIterations)
  let yArray = splitNumberIntoN(changeInY, movementIterations)
  let BOIts = mergeArrays(powerArray.length, position, nextPosition, xArray, yArray, powerArray)
  matchDetails.ball.ballOverIterations = BOIts
  let endPos = resolveBallMovement(player, position, BOIts[0], power, kickOffTeam, secondTeam, matchDetails)
  if (matchDetails.endIteration == true) return matchDetails
  matchDetails.ball.ballOverIterations.shift()
  matchDetails.iterationLog.push(`resolving ball movement`)
  return endPos
}

/**
 * Splits a number into N equal parts.
 * @function
 * @param {number} number - The number to be split.
 * @param {number} n - The number of parts to split the number into.
 * @returns {number[]} An array containing the split parts of the number.
 */
function splitNumberIntoN(number, n) {
  const arrayN = Array.from(Array(n).keys())
  let splitNumber = []
  for (let thisn of arrayN) {
    let nextNum = common.aTimesbDividedByC((n - thisn), number, n)
    if (nextNum === 0) splitNumber.push(1)
    else splitNumber.push(common.round((nextNum), 0))
  }
  return splitNumber
}

/**
 * Merges multiple arrays into a new array based on the given parameters.
 * @function
 * @param {number} arrayLength - The length of the resulting array.
 * @param {number[]} oldPos - The starting position of the merging process.
 * @param {number[]} newPos - The ending position of the merging process.
 * @param {number[]} array1 - The first array to merge.
 * @param {number[]} array2 - The second array to merge.
 * @param {number[]} array3 - The third array to merge.
 * @returns {number[]} The merged array.
 */
function mergeArrays(arrayLength, oldPos, newPos, array1, array2, array3) {
  let tempPos = [oldPos[0], oldPos[1]]
  const arrayN = Array.from(Array(arrayLength - 1).keys())
  let newArray = []
  for (let thisn of arrayN) {
    newArray.push([tempPos[0] + array1[thisn], tempPos[1] + array2[thisn], array3[thisn]])
    tempPos = [tempPos[0] + array1[thisn], tempPos[1] + array2[thisn]]
  }
  newArray.push([newPos[0], newPos[1], array3[array3.length - 1]])
  return newArray
}

/**
 * @module `ballMovement` - Contains functions related to the movement of the ball in a football match.
 * 
 * @requires `common`
 * @requires `setPositions`
 * 
 * @function `ballKicked` - Function to handle the event when the ball is kicked.
 * @function `shotMade` - Function to handle the event when a shot is made.
 * @function `penaltyTaken` - Function to handle the event when a penalty is taken.
 * @function `throughBall` - Function to handle the event when a through ball is played.
 * @function `resolveBallMovement` - Function to resolve the ball movement based on various factors.
 * @function `resolveDeflection` - Function to resolve the deflection of the ball.
 * @function `getBallDirection` - Function to get the direction of the ball.
 * @function `ballPassed` - Function to handle the event when the ball is passed.
 * @function `ballCrossed` - Function to handle the event when the ball is crossed.
 * @function `moveBall` - Function to move the ball.
 * @function `mergeArrays` - Function to merge arrays.
 * @function `splitNumberIntoN` - Function to split a number into N parts.
 * @function `calcBallMovementOverTime` - Function to calculate the ball movement over time.
 * @function `setDeflectionDirectionPos` - Function to set the deflection direction position.
 * @function `setDeflectionPlayerOffside` - Function to set the deflection player offside.
 * @function `getTargetPlayer` - Function to get the target player.
 * @function `setDeflectionPlayerHasBall` - Function to set if the deflection player has the ball.
 * @function `setBallMovementMatchDetails` - Function to set the ball movement match details.
 * @function `thisPlayerIsInProximity` - Function to check if this player is in proximity.
 * @function `setTargetPlyPos` - Function to set the target player position.
 * @function `setBPlayer` - Function to set the B player.
 * @function `checkGoalScored` - Function to check if a goal is scored.
 * @function `getTopKickedPosition` - Function to get the top kicked position.
 * @function `getBottomKickedPosition` - Function to get the bottom kicked position.
 */
export const ballMovement = {
  ballKicked,
  shotMade,
  penaltyTaken,
  throughBall,
  resolveBallMovement,
  resolveDeflection,
  getBallDirection,
  ballPassed,
  ballCrossed,
  moveBall,
  mergeArrays,
  splitNumberIntoN,
  calcBallMovementOverTime,
  setDeflectionDirectionPos,
  setDeflectionPlayerOffside,
  getTargetPlayer,
  setDeflectionPlayerHasBall,
  setBallMovementMatchDetails,
  thisPlayerIsInProximity,
  setTargetPlyPos,
  setBPlayer,
  checkGoalScored,
  getTopKickedPosition,
  getBottomKickedPosition
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#%2560completeSlide%2560-Completestheslidingactionofaplayer.">`completeSlide` - Completes the sliding action of a player.</a></li><li><a href="global.html#%2560getBottomKickedPosition%2560-Functiontogetthebottomkickedposition.">`getBottomKickedPosition` - Function to get the bottom kicked position.</a></li><li><a href="global.html#%2560populateMatchDetails%2560-Populatesthematchdetails.">`populateMatchDetails` - Populates the match details.</a></li><li><a href="global.html#%2560removeBallFromAllPlayers%2560-Removestheballfromallplayers.">`removeBallFromAllPlayers` - Removes the ball from all players.</a></li><li><a href="global.html#%2560setBottomFreekick%2560-Setsthepositionofthebottomfreekick.">`setBottomFreekick` - Sets the position of the bottom free kick.</a></li><li><a href="global.html#%2560setRightSecondTeamThrowIn%2560-Setsthepositionsfortherightthrow-inofthesecondteam.">`setRightSecondTeamThrowIn` - Sets the positions for the right throw-in of the second team.</a></li><li><a href="global.html#%2560substitutePlayerHalf%2560-Substitutesaplayerinthecurrentteamduringhalf-time.">`substitutePlayerHalf` - Substitutes a player in the current team during half-time.</a></li><li><a href="global.html#%2560validatePlayerPositions%2560-Validatestheplayerpositions.">`validatePlayerPositions` - Validates the player positions.</a></li><li><a href="global.html#aTimesbDividedByC">aTimesbDividedByC</a></li><li><a href="global.html#attackLeftThrowInPlayerPosition">attackLeftThrowInPlayerPosition</a></li><li><a href="global.html#attackRightThrowInPlayerPosition">attackRightThrowInPlayerPosition</a></li><li><a href="global.html#ballCrossed">ballCrossed</a></li><li><a href="global.html#ballKicked">ballKicked</a></li><li><a href="global.html#ballMoved">ballMoved</a></li><li><a href="global.html#ballPassed">ballPassed</a></li><li><a href="global.html#ballThrowInPosition">ballThrowInPosition</a></li><li><a href="global.html#bottomTeamPlayerHasBall">bottomTeamPlayerHasBall</a></li><li><a href="global.html#bottomTeamPlayerHasBallInMiddle">bottomTeamPlayerHasBallInMiddle</a></li><li><a href="global.html#bottomTeamPlayerHasBallInTopPenaltyBox">bottomTeamPlayerHasBallInTopPenaltyBox</a></li><li><a href="global.html#calcBallMovementOverTime">calcBallMovementOverTime</a></li><li><a href="global.html#calcRetentionScore">calcRetentionScore</a></li><li><a href="global.html#calcTackleScore">calcTackleScore</a></li><li><a href="global.html#calculatePower">calculatePower</a></li><li><a href="global.html#checkGoalScored">checkGoalScored</a></li><li><a href="global.html#checkOffside">checkOffside</a></li><li><a href="global.html#checkOppositionAhead">checkOppositionAhead</a></li><li><a href="global.html#checkOppositionBelow">checkOppositionBelow</a></li><li><a href="global.html#checkPositionInBottomPenaltyBox">checkPositionInBottomPenaltyBox</a></li><li><a href="global.html#checkPositionInBottomPenaltyBoxClose">checkPositionInBottomPenaltyBoxClose</a></li><li><a href="global.html#checkPositionInTopPenaltyBox">checkPositionInTopPenaltyBox</a></li><li><a href="global.html#checkPositionInTopPenaltyBoxClose">checkPositionInTopPenaltyBoxClose</a></li><li><a href="global.html#checkProvidedAction">checkProvidedAction</a></li><li><a href="global.html#checkTeamMateSpaceClose">checkTeamMateSpaceClose</a></li><li><a href="global.html#closestPlayerActionBallX">closestPlayerActionBallX</a></li><li><a href="global.html#closestPlayerActionBallY">closestPlayerActionBallY</a></li><li><a href="global.html#closestPlayerToBall">closestPlayerToBall</a></li><li><a href="global.html#closestPlayerToPosition">closestPlayerToPosition</a></li><li><a href="global.html#completeMovement">completeMovement</a></li><li><a href="global.html#completeSlide">completeSlide</a></li><li><a href="global.html#completeTackleWhenCloseNoBall">completeTackleWhenCloseNoBall</a></li><li><a href="global.html#decideMovement">decideMovement</a></li><li><a href="global.html#defenceLeftThrowInPlayerPosition">defenceLeftThrowInPlayerPosition</a></li><li><a href="global.html#defenceRightThrowInPlayerPosition">defenceRightThrowInPlayerPosition</a></li><li><a href="global.html#findPossActions">findPossActions</a></li><li><a href="global.html#formationCheck">formationCheck</a></li><li><a href="global.html#foulIntensity">foulIntensity</a></li><li><a href="global.html#getBallDirection">getBallDirection</a></li><li><a href="global.html#getBallTrajectory">getBallTrajectory</a></li><li><a href="global.html#getBottomKickedPosition">getBottomKickedPosition</a></li><li><a href="global.html#getBottomMostPlayer">getBottomMostPlayer</a></li><li><a href="global.html#getClosestTrajPosition">getClosestTrajPosition</a></li><li><a href="global.html#getInterceptMovement">getInterceptMovement</a></li><li><a href="global.html#getInterceptPosition">getInterceptPosition</a></li><li><a href="global.html#getInterceptTrajectory">getInterceptTrajectory</a></li><li><a href="global.html#getMovement">getMovement</a></li><li><a href="global.html#getPlayersInDistance">getPlayersInDistance</a></li><li><a href="global.html#getRandomBottomPenaltyPosition">getRandomBottomPenaltyPosition</a></li><li><a href="global.html#getRandomNumber">getRandomNumber</a></li><li><a href="global.html#getRandomTopPenaltyPosition">getRandomTopPenaltyPosition</a></li><li><a href="global.html#getRunMovement">getRunMovement</a></li><li><a href="global.html#getSprintMovement">getSprintMovement</a></li><li><a href="global.html#getTackleMovement">getTackleMovement</a></li><li><a href="global.html#getTargetPlayer">getTargetPlayer</a></li><li><a href="global.html#getTopKickedPosition">getTopKickedPosition</a></li><li><a href="global.html#getTopMostPlayer">getTopMostPlayer</a></li><li><a href="global.html#handleBallPlayerActions">handleBallPlayerActions</a></li><li><a href="global.html#inBottomPenalty">inBottomPenalty</a></li><li><a href="global.html#inTopPenalty">inTopPenalty</a></li><li><a href="global.html#initiateGame">initiateGame</a></li><li><a href="global.html#isBetween">isBetween</a></li><li><a href="global.html#isEven">isEven</a></li><li><a href="global.html#isInjured">isInjured</a></li><li><a href="global.html#isOdd">isOdd</a></li><li><a href="global.html#keepInBoundaries">keepInBoundaries</a></li><li><a href="global.html#koDecider">koDecider</a></li><li><a href="global.html#matchInjury">matchInjury</a></li><li><a href="global.html#mergeArrays">mergeArrays</a></li><li><a href="global.html#moveBall">moveBall</a></li><li><a href="global.html#moveTowardsBall">moveTowardsBall</a></li><li><a href="global.html#newKickedPosition">newKickedPosition</a></li><li><a href="global.html#noBallNotGK2CloseBall">noBallNotGK2CloseBall</a></li><li><a href="global.html#noBallNotGK2CloseBallBottomTeam">noBallNotGK2CloseBallBottomTeam</a></li><li><a href="global.html#noBallNotGK4CloseBall">noBallNotGK4CloseBall</a></li><li><a href="global.html#noBallNotGK4CloseBallBottomTeam">noBallNotGK4CloseBallBottomTeam</a></li><li><a href="global.html#offsideYPOS">offsideYPOS</a></li><li><a href="global.html#onTopCornerBoundary">onTopCornerBoundary</a></li><li><a href="global.html#oppositionNearPlayer">oppositionNearPlayer</a></li><li><a href="global.html#penaltyTaken">penaltyTaken</a></li><li><a href="global.html#playIteration">playIteration</a></li><li><a href="global.html#playerDoesNotHaveBall">playerDoesNotHaveBall</a></li><li><a href="global.html#populateActionsJSON">populateActionsJSON</a></li><li><a href="global.html#populateMatchDetails">populateMatchDetails</a></li><li><a href="global.html#populatePossibleActions">populatePossibleActions</a></li><li><a href="global.html#readFile">readFile</a></li><li><a href="global.html#removeBallFromAllPlayers">removeBallFromAllPlayers</a></li><li><a href="global.html#resetPlayerPositions">resetPlayerPositions</a></li><li><a href="global.html#resolveBallMovement">resolveBallMovement</a></li><li><a href="global.html#resolveDeflection">resolveDeflection</a></li><li><a href="global.html#resolveSlide">resolveSlide</a></li><li><a href="global.html#resolveTackle">resolveTackle</a></li><li><a href="global.html#round">round</a></li><li><a href="global.html#selectAction">selectAction</a></li><li><a href="global.html#setAttackRelativePos">setAttackRelativePos</a></li><li><a href="global.html#setBPlayer">setBPlayer</a></li><li><a href="global.html#setBallMovementMatchDetails">setBallMovementMatchDetails</a></li><li><a href="global.html#setBallSpecificCornerValue">setBallSpecificCornerValue</a></li><li><a href="global.html#setBallSpecificGoalKickValue">setBallSpecificGoalKickValue</a></li><li><a href="global.html#setBallSpecificGoalScoreValue">setBallSpecificGoalScoreValue</a></li><li><a href="global.html#setBallSpecificPenaltyValue">setBallSpecificPenaltyValue</a></li><li><a href="global.html#setBottomFreekick">setBottomFreekick</a></li><li><a href="global.html#setBottomGoalKick">setBottomGoalKick</a></li><li><a href="global.html#setBottomHalfwayToTopQtrYPos">setBottomHalfwayToTopQtrYPos</a></li><li><a href="global.html#setBottomLeftCornerPositions">setBottomLeftCornerPositions</a></li><li><a href="global.html#setBottomLowerFinalQtrBylinePos">setBottomLowerFinalQtrBylinePos</a></li><li><a href="global.html#setBottomOneHundredToHalfwayYPos">setBottomOneHundredToHalfwayYPos</a></li><li><a href="global.html#setBottomOneHundredYPos">setBottomOneHundredYPos</a></li><li><a href="global.html#setBottomPenalty">setBottomPenalty</a></li><li><a href="global.html#setBottomRightCornerPositions">setBottomRightCornerPositions</a></li><li><a href="global.html#setBottomUpperQtrCentreYPos">setBottomUpperQtrCentreYPos</a></li><li><a href="global.html#setClosePlayerTakesBall">setClosePlayerTakesBall</a></li><li><a href="global.html#setDefenceRelativePos">setDefenceRelativePos</a></li><li><a href="global.html#setDeflectionDirectionPos">setDeflectionDirectionPos</a></li><li><a href="global.html#setDeflectionPlayerHasBall">setDeflectionPlayerHasBall</a></li><li><a href="global.html#setDeflectionPlayerOffside">setDeflectionPlayerOffside</a></li><li><a href="global.html#setFailedTackle">setFailedTackle</a></li><li><a href="global.html#setFoul">setFoul</a></li><li><a href="global.html#setGameVariables">setGameVariables</a></li><li><a href="global.html#setGoalieHasBall">setGoalieHasBall</a></li><li><a href="global.html#setInjury">setInjury</a></li><li><a href="global.html#setIntentPosition">setIntentPosition</a></li><li><a href="global.html#setKickOffTeamGoalScored">setKickOffTeamGoalScored</a></li><li><a href="global.html#setLeftKickOffTeamThrowIn">setLeftKickOffTeamThrowIn</a></li><li><a href="global.html#setLeftSecondTeamThrowIn">setLeftSecondTeamThrowIn</a></li><li><a href="global.html#setLooseintentPOS">setLooseintentPOS</a></li><li><a href="global.html#setNewRelativeBottomYPOS">setNewRelativeBottomYPOS</a></li><li><a href="global.html#setNewRelativeTopYPOS">setNewRelativeTopYPOS</a></li><li><a href="global.html#setPlayerPenaltyPositions">setPlayerPenaltyPositions</a></li><li><a href="global.html#setPlayerPositions">setPlayerPositions</a></li><li><a href="global.html#setPostTackleBall">setPostTackleBall</a></li><li><a href="global.html#setPostTacklePosition">setPostTacklePosition</a></li><li><a href="global.html#setRightKickOffTeamThrowIn">setRightKickOffTeamThrowIn</a></li><li><a href="global.html#setRightSecondTeamThrowIn">setRightSecondTeamThrowIn</a></li><li><a href="global.html#setSecondTeamGoalScored">setSecondTeamGoalScored</a></li><li><a href="global.html#setSetpieceKickOffTeam">setSetpieceKickOffTeam</a></li><li><a href="global.html#setSetpieceSecondTeam">setSetpieceSecondTeam</a></li><li><a href="global.html#setSuccessTackle">setSuccessTackle</a></li><li><a href="global.html#setTargetPlyPos">setTargetPlyPos</a></li><li><a href="global.html#setTopBottomQtrCentreYPos">setTopBottomQtrCentreYPos</a></li><li><a href="global.html#setTopFreekick">setTopFreekick</a></li><li><a href="global.html#setTopGoalKick">setTopGoalKick</a></li><li><a href="global.html#setTopHalfwayToBottomQtrYPos">setTopHalfwayToBottomQtrYPos</a></li><li><a href="global.html#setTopLeftCornerPositions">setTopLeftCornerPositions</a></li><li><a href="global.html#setTopLowerFinalQtrBylinePos">setTopLowerFinalQtrBylinePos</a></li><li><a href="global.html#setTopOneHundredToHalfwayYPos">setTopOneHundredToHalfwayYPos</a></li><li><a href="global.html#setTopOneHundredYPos">setTopOneHundredYPos</a></li><li><a href="global.html#setTopPenalty">setTopPenalty</a></li><li><a href="global.html#setTopRightCornerPositions">setTopRightCornerPositions</a></li><li><a href="global.html#shotMade">shotMade</a></li><li><a href="global.html#splitNumberIntoN">splitNumberIntoN</a></li><li><a href="global.html#startSecondHalf">startSecondHalf</a></li><li><a href="global.html#substitutePlayer">substitutePlayer</a></li><li><a href="global.html#substitutePlayerHalf">substitutePlayerHalf</a></li><li><a href="global.html#sumFrom1toX">sumFrom1toX</a></li><li><a href="global.html#switchSide">switchSide</a></li><li><a href="global.html#team1atBottom">team1atBottom</a></li><li><a href="global.html#team1atTop">team1atTop</a></li><li><a href="global.html#thisPlayerIsInProximity">thisPlayerIsInProximity</a></li><li><a href="global.html#throughBall">throughBall</a></li><li><a href="global.html#topTeamPlayerHasBall">topTeamPlayerHasBall</a></li><li><a href="global.html#topTeamPlayerHasBallInBottomPenaltyBox">topTeamPlayerHasBallInBottomPenaltyBox</a></li><li><a href="global.html#upToMax">upToMax</a></li><li><a href="global.html#upToMin">upToMin</a></li><li><a href="global.html#updateInformation">updateInformation</a></li><li><a href="global.html#validateArguments">validateArguments</a></li><li><a href="global.html#validateBall">validateBall</a></li><li><a href="global.html#validateMatchDetails">validateMatchDetails</a></li><li><a href="global.html#validateNumberOfPlayers">validateNumberOfPlayers</a></li><li><a href="global.html#validatePitch">validatePitch</a></li><li><a href="global.html#validatePlayerObjects">validatePlayerObjects</a></li><li><a href="global.html#validatePlayerObjectsIteration">validatePlayerObjectsIteration</a></li><li><a href="global.html#validatePlayerPositions">validatePlayerPositions</a></li><li><a href="global.html#validatePlayerSkills">validatePlayerSkills</a></li><li><a href="global.html#validateStats">validateStats</a></li><li><a href="global.html#validateTeam">validateTeam</a></li><li><a href="global.html#validateTeamSecondHalf">validateTeamSecondHalf</a></li><li><a href="global.html#wasFoul">wasFoul</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Apr 16 2024 21:19:18 GMT+0200 (Ora legale dell’Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
